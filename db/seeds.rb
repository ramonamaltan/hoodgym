require 'open-uri'
require 'nokogiri'

puts 'Delete existing entries'
User.destroy_all
Rental.destroy_all
EquipmentOffer.destroy_all
Station.destroy_all

# Webscraping for stations
puts 'stations'
stations = [{:name=>"Outdoor Gym - Calisthenics Gym EUREF Campus", :location=>"Euref-Campus 20, 10829 Berlin"}, {:name=>"Calisthenics Equipment- Insel der Jugend - Turnbar", :location=>"Abteibrücke, 12435 Berlin"}, {:name=>"Berlin-Spandau - 4F Circle Playparc - Outdoor Fitness Equipment", :location=>"Am Kiesteich 41, 13589 Berlin"}, {:name=>"Exercise Park - Outdoor Fitness Studio Tegel Humboldt-Gymnasium", :location=>"A 111, 13509 Berlin"}, {:name=>"Outdoor Pull Up Bars - Calisthenics Gym Spreebogen Charlottenburg", :location=>"Dovestraße 3a, 10587 Berlin"}, {:name=>"Turnbar Calisthenics Park Max-Joseph-Metzger-Platz", :location=>"Müllerstraße 16, 13353 Berlin"}, {:name=>"Calisthenics Facility - Calisthenics Park Gleisdreieck", :location=>"Luckenwalder Straße 6, 10785 Berlin"}, {:name=>"Ninja hall Berlin", :location=>"Seelenbinderstraße 137, 12555 Berlin"}, {:name=>"Public Pull Up Bars - Gemeindepark Lankwitz", :location=>"Malteserstraße 53, 12249 Berlin"}, {:name=>"Calisthenics Facility - Sportplatz Hanna-Renate-Laurien-Platz (S-Bahnhof Lankwitz)", :location=>"Hanna-Renate-Laurien-Platz, 12247 Berlin"}, {:name=>"Fitness Facility - Trainingsplatz Friedrichsfelde", :location=>"Marzahner Chaussee 18, 10315 Berlin"}, {:name=>"Public Pull Up Bars - Outdoor Fitness Geräte Lewaldplatz", :location=>"Lewaldstraße 2, 10439 Berlin"}, {:name=>"Exercise Park - Workout Park Letteplatz", :location=>"Letteallee 48, 13409 Berlin"}, {:name=>"Outdoor Gym - Calisthenics Gym Seggeluchbecken", :location=>"Rüdersdorfer Weg, 13435 Berlin"}, {:name=>"Fitness Park - Trainingsplatz im Allende Viertel", :location=>"Alfred-Randt-Straße 44, 12559 Berlin"}, {:name=>"Outdoor Gym - Outdoor Fitness Berlin Steinbergpark", :location=>"Phloxweg, 13509 Berlin"}, {:name=>"Calisthenics Park - Gatow", :location=>"Johann-Landefeldt-Straße 89, 14089 Berlin"}, {:name=>"Outdoor Gym - Outdoor Fitnessanlage", :location=>"Weydemeyerstraße 9, 10178 Berlin"}, {:name=>"Weissensee Adidas Runner Fitness Parcour", :location=>"Große Seestraße 13, 13086 Berlin"}, {:name=>"Outdoor Fitness Exercise Equipment - Schmetterlingswiesen", :location=>"Pollnower Weg 2, 12683 Berlin"}, {:name=>"Outdoor Gym - Mitte", :location=>"Lichtenberger Str. 41, 10243 Berlin"}, {:name=>"Street Workout Park - Landschaftspark Johannisthal/Adlershof", :location=>"Hermann-Dorner-Allee /Alexander-von-Humboldt-Weg, 12489 Berlin"}, {:name=>"Parkour Park - Spandau", :location=>"Falkenseer Chaussee 207, 13589 Berlin"}, {:name=>"Parkour Park - Zick Zack Zwingli - Moabit", :location=>"Zwinglistraße 36, 10555 Berlin"}, {:name=>"Outdoor pull up bars - Warthestraße", :location=>"Wartheplatz, 12051 Berlin"}, {:name=>"Calisthenics Park - Spandau", :location=>"Ackerstraße 36, 13585 Berlin"}, {:name=>"Outdoor Fitness Gym - Invalidenpark", :location=>"Scharnhorststraße 35, 10115 Berlin"}, {:name=>"Calisthenics Park - Kenguru.PRO", :location=>"SportPark Poststadion Moabit, Lehrter Str. 59, 10557 Berlin"}, {:name=>"Parkourpark - Hellersdorf", :location=>"Alt-Hellersdorf 29, 12629 Berlin"}, {:name=>"Street Workout Park - Kenguru.PRO", :location=>"Koloniestraße 117, 13359 Berlin"}, {:name=>"Monkeybar - Hohenschönhausen", :location=>"Wustrower Str. 26,13051 Berlin"}, {:name=>"Outdoor Exercise Station - Vinetaplatz", :location=>"Wolliner Strasse 28, 13355 Berlin"}, {:name=>"Berlin Spandau - Childrens Playground with Horizontal  Bars - Rudolf-Wissell-Siedlung", :location=>"Maulbeerallee 53, 13593 Berlin"}, {:name=>"Exercise Park  - Marzahn", :location=>"Basdorfer Straße 6, 12679 Berlin"}, {:name=>"Berlin (Lichtenberg) - 4FCircle - Zachert Sportplatz", :location=>"Rummelsburger Straße 38, 10315 Berlin"}, {:name=>"Prenzlauer Berg - Outdoor Gym - Ernst-Thälmann-Park", :location=>"Lilli-Henoch-Straße 9, 10405 Berlin"}, {:name=>"Outdoor Fitness Equipment - Volkspark Friedrichshain", :location=>"Danziger Straße 210, 10407 Berlin"}, {:name=>"Workout Spot - Marzahn", :location=>"Burghardweg 40, 12683 Berlin"}, {:name=>"Berlin (Blankenburg) - Trim Trail", :location=>"Rudelsburgstraße 1, 13129 Berlin"}, {:name=>"Pankow - Calisthenics Equipment - Kissingenstadion", :location=>"Forchheimer Straße 15, 13189 Berlin"}, {:name=>"Berlin Schönefeld - Outdoor Gym - Großgörschenstraße", :location=>"Großgörschenstraße 29, 10829 Berlin"}, {:name=>"Calisthenics Park - Zeppelinplatz", :location=>"Zeppelinplatz 15, 13353 Berlin"}, {:name=>"Thick Pull Up Bars - Weinbergspark", :location=>"Veteranenstraße 13, 10119 Berlin"}, {:name=>"Fitness Trail  - Gemeindepark Lankwitz", :location=>"Malteserstraße 38, 12249 Berlin"}, {:name=>"Outdoor Fitness Corner - Marzahn", :location=>"Brodowiner Ring 35, 12679 Berlin"}, {:name=>"Calisthenics Park - Böklerpark", :location=>"Böcklerstraße 10, 10969 Berlin"}, {:name=>"Calisthenics Park - Friedrich-Ludwig-Jahn-Sportpark", :location=>"Sprunggrube, Gaudystraße, Gleimviertel, Prenzlauer Berg, Pankow, Berlin, 10437"}, {:name=>"Outdoor Fitness Park - Moabit", :location=>"4, Claire-Waldoff-Promenade, Moabit, Mitte, Berlin, 10557"}, {:name=>"Calisthenics Park - Volkspark Friedrichshain", :location=>"1, Margarete-Sommer-Straße, Prenzlauer Berg, Pankow, Berlin, 10407"}, {:name=>"Calisthenics Park - Volks- und Waldpark Wuhlheide", :location=>"Adidas-Sportfläche, Kastanienallee, Oberschöneweide, Treptow-Köpenick, Berlin, 12459"}, {:name=>"Calisthenics Equipment- Insel der Jugend - Turnbar", :location=>"Abteibrücke, 12435 Berlin"}, {:name=>"Calisthenics Park - Gatow", :location=>"Johann-Landefeldt-Straße 89, 14089 Berlin"}, {:name=>"Outdoor Gym - Calisthenics Gym EUREF Campus", :location=>"Euref-Campus 20, 10829 Berlin"}, {:name=>"Calisthenics Park - Kenguru.PRO", :location=>"SportPark Poststadion Moabit, Lehrter Str. 59, 10557 Berlin"}, {:name=>"Exercise Park - Workout Park Letteplatz", :location=>"Letteallee 48, 13409 Berlin"}]
stations.each do |station_hash|
  Station.create(station_hash)
end
puts 'stations done'

# Rest of seeds
puts 'Start seeding users'
ramona = User.create(password: '123456', email: 'ramona@gmail.com', location: 'Koloniestr. 21, 13359 Berlin', first_name: 'ramona', time_account: 50)
andi = User.create(password: '123456', email: 'andi@gmail.com', location: 'Luxemburger Str. 10, 13353 Berlin', first_name: 'andreas', time_account: 100)

puts 'Start seeding stations'
freeletics_station = Station.create(name: 'Freeletics Training Ground', location: 'Monbijoustraße 3B, 10117 Berlin')
beuth_station = Station.create(name: 'Beuth Hochschule', location: 'Luxemburger Str. 10, 13353 Berlin')

puts 'Start seeding equipment_offers'
dumbbell15_freeletics1 = EquipmentOffer.create(name: '15kg Dumbbell', station_id: freeletics_station.id, item_id: 1, availability: false, presence: false, locked: false)
dumbbell15_freeletics2 = EquipmentOffer.create(name: '5kg Dumbbell', station_id: freeletics_station.id, item_id: 3, availability: false, presence: false, locked: false)
dumbbell15_beuth = EquipmentOffer.create(name: '15kg Dumbbell', station_id: beuth_station.id, item_id: 2)
dumbbell5_beuth = EquipmentOffer.create(name: '5kg Dumbbell', station_id: beuth_station.id, item_id: 4)

puts 'Start seeding rentals'
rental1 = Rental.create(begin_at: '2020-12-23 09:10:03', user_id: ramona.id, equipment_offer_id: dumbbell15_freeletics2.id)
rental2 = Rental.create(begin_at: '2020-12-23 09:20:03', user_id: ramona.id, equipment_offer_id: dumbbell15_freeletics1.id)
rental3 = Rental.create(begin_at: '2020-12-23 09:10:03', end_at: '2020-12-23 09:40:03', user_id: ramona.id, equipment_offer_id: dumbbell15_beuth.id)
rental4 = Rental.create(begin_at: '2020-12-23 09:20:03', end_at: '2020-12-23 10:10:03', user_id: ramona.id, equipment_offer_id: dumbbell5_beuth.id)


puts "Finished Seeding: #{User.count} users, #{Rental.count} rentals, #{EquipmentOffer.count} equipment offers and #{Station.count} stations"